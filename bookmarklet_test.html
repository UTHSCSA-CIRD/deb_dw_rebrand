<html>
<head>
<title>Bookmarklet Test</title>
</head>
<body>

<p>
Step 1. Drag the following bookmarklet to the bookmark bar on your browser:

<a href="javascript:(function()%7Bfunction%20testRemoteBranding(s%2Ce)%7Bvar%20t%3Ddocument.head%7C%7Cdocument.getElementsByTagName(%22head%22)%5B0%5D%2Ci%3Dnew%20XMLHttpRequest%3Bi.open(%22GET%22%2Ce%2Bs)%2Ci.onreadystatechange%3Dfunction()%7Bif(4%3D%3D%3Di.readyState)if(200%3D%3D%3Di.status)%7Bvar%20s%3Ddocument.createElement(%22style%22)%3Bs.type%3D%22text%2Fcss%22%2Cs.styleSheet%3Fs.styleSheet.cssText%3Di.responseText%3As.appendChild(document.createTextNode(i.responseText))%2Ct.appendChild(s)%7Delse%20console.log(%22Error%22%2Ci.statusText)%7D%2Ci.send()%7DcssFiles%3D%5B%22js-i2b2%2Fui.styles%2Fui.styles.css%22%2C%22js-i2b2%2Fcells%2FCRC%2Fassets%2Fquery_report.css%22%2C%22assets%2Fi2b2.css%22%2C%22assets%2Fi2b2-NEW.css%22%2C%22js-i2b2%2Fcells%2FPM%2Fassets%2FmodProjects.css%22%2C%22js-i2b2%2Fcells%2FPLUGINMGR%2Fassets%2FvwViewer.css%22%2C%22assets%2Fmsg_sniffer.css%22%2C%22assets%2Fmsg_snifferIE6.css%22%5D%2CimpCss%3D%7B%22vwViewer.css%22%3A%22js-i2b2%2Fcells%2FPLUGINMGR%2Fassets%2F%22%2C%22vwList.css%22%3A%22js-i2b2%2Fcells%2FPLUGINMGR%2Fassets%2F%22%2C%22vwHistory.css%22%3A%22js-i2b2%2Fcells%2FCRC%2Fassets%2F%22%2C%22vwQryTool.css%22%3A%22js-i2b2%2Fcells%2FCRC%2Fassets%2F%22%2C%22vwStatus.css%22%3A%22js-i2b2%2Fcells%2FCRC%2Fassets%2F%22%2C%22modLabValues.css%22%3A%22js-i2b2%2Fcells%2FCRC%2Fassets%2F%22%2C%22vwWork.css%22%3A%22js-i2b2%2Fcells%2FWORK%2Fassets%2F%22%2C%22ontMain.css%22%3A%22js-i2b2%2Fcells%2FONT%2Fassets%2F%22%7D%2Cremurl%3D%22https%3A%2F%2Fraw.githubusercontent.com%2FUTHSCSA-CIRD%2Fdeb_dw_rebrand%2Fgh-pages%2Fwebclient.test%2F%22%3Bvar%20button%3Ddocument.createElement(%22Button%22)%3Bbutton.innerHTML%3D%22Rebrand!%22%2Cbutton.style%3D%22top%3A0%3Bright%3A0%3Bposition%3Afixed%3B%22%2Cbutton.onclick%3Dfunction()%7B%24j.each(cssFiles%2Cfunction(s)%7BtestRemoteBranding(cssFiles%5Bs%5D%2Cremurl)%7D)%2C%24j.each(impCss%2Cfunction(s%2Ce)%7BtestRemoteBranding(e%2Bs%2Cremurl)%7D)%2C%24j(%22%23topBarTitle%22).prop(%22src%22%2Cremurl%2B%22assets%2Fimages%2Ftitle.gif%22)%2C%24j(%22.formDiv%22).children(%22div.label%22)%5B2%5D.innerText%3D%22Server%3A%22%2C%24j(%22%23i2b2_login_modal_dialog_h%22).html(function(s%2Ce)%7Breturn%20e.gsub(%22i2b2%20%22%2C%22%22)%7D)%2C%24j.each(%24j('img%5Bsrc*%3D%22QryTool%22%5D')%2Cfunction()%7Bthis.setAttribute(%22src%22%2Cthis.src.replace(this.baseURI%2Cremurl))%7D)%7D%2Cdocument.body.appendChild(button)%7D)()">Rebrand i2b2</a>
</p>

<p>
Step 2. Go to any i2b2 site. For example the <a href="https://www.i2b2.org/webclient/" target=_NEW>Harvard demo</a>.
</p>

<p>
Step 3. Click on the bookmarklet you created in Step 1. A new button will appear on the upper right saying "Rebrand!". Click that button to preview how the re-branded site would look. If you log in, you might need to click that button again to refresh some of the dynamic elements.
</p>

</body>
</html>
